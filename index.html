<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="monetag" content="492d34fe7c6f5b0ea9c54d5a2fed01fe">
    <meta name="theme-color" content="#8b5cf6" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/notification-icon.png" />
    <title>Study AI</title>
    <!-- Preconnect to external services -->
    <link rel="preconnect" href="https://csylbxuiukwhpybuhizr.supabase.co" />
    <link rel="dns-prefetch" href="https://csylbxuiukwhpybuhizr.supabase.co" />
    <!-- ResponsiveVoice Text-to-Speech with API Key -->
    <script>
      // Global flags for ResponsiveVoice status
      window.responsiveVoiceReady = false;
      window.responsiveVoiceError = false;
      
      // Enhanced initialization function
      function initResponsiveVoice() {
        console.log('Initializing ResponsiveVoice...');
        
        if (typeof responsiveVoice !== 'undefined') {
          // Set up event listeners
          if (responsiveVoice.OnVoiceReady) {
            responsiveVoice.OnVoiceReady = function() {
              window.responsiveVoiceReady = true;
              console.log('ResponsiveVoice is ready with API key');
              console.log('Available voices:', responsiveVoice.getVoices().length);
            };
          }
          
          // Check if already ready
          if (responsiveVoice.voiceSupport && responsiveVoice.voiceSupport()) {
            window.responsiveVoiceReady = true;
            console.log('ResponsiveVoice initialized successfully with API key');
            console.log('Available voices:', responsiveVoice.getVoices().length);
          }
        } else {
          console.error('ResponsiveVoice not loaded');
          window.responsiveVoiceError = true;
        }
      }
      
      // Error handler
      function handleResponsiveVoiceError() {
        console.error('ResponsiveVoice failed to load');
        window.responsiveVoiceError = true;
        window.responsiveVoiceReady = false;
      }
      
      // Multiple initialization attempts for better compatibility
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded, waiting for ResponsiveVoice...');
        setTimeout(initResponsiveVoice, 1000);
      });
      
      // For mobile/APK compatibility
      document.addEventListener('deviceready', function() {
        setTimeout(initResponsiveVoice, 500);
      }, false);
      
      // Window load event
      window.addEventListener('load', function() {
        setTimeout(initResponsiveVoice, 1500);
      });
    </script>
    
    <!-- ResponsiveVoice with your API key -->
    <script 
      src="https://code.responsivevoice.org/responsivevoice.js?key=5topRmyr" 
      onload="setTimeout(initResponsiveVoice, 200)" 
      onerror="handleResponsiveVoiceError()"
    ></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
